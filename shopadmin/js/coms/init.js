window.onerror=function(a){if(MODALPANEL){MODALPANEL.hide()}};if(!Setting){var Setting={}}Setting.get=function(c,a){return a};var workgroundMarginX=function(){return $("workground").getStyle("margin-left").toInt()+$("workground").getStyle("margin-right").toInt()};function updateSize(){var c=window.mainHeight=window.getSize().y-$("header").getSize().y;var a=window.mainWidth=$("header").getSize().x-(isNaN(workgroundMarginX())?0:workgroundMarginX());window.mainH=c-$("headBar").offsetHeight-$("footBar").offsetHeight;var b=a.limit(1004-(isNaN(workgroundMarginX())?0:workgroundMarginX()),10000);$("main").setStyles({width:b,height:mainH});$("footBar").setStyle("width",b);$("headBar").setStyle("width",b);if(fh=$E("#headBar .finder-header")){fh.setStyle("width",b)}$("sidecontent").setStyle("height",c);$("leftToggler").setStyle("height",c)}var W,task;var getW=function(){return(W&&$type(W)=="object")?W:new ShopEx_AdminXHR()};function showSide(){$(document.body).removeClass("closeLeft");updateSize()}function closeSide(){$(document.body).addClass("closeLeft");updateSize()}window.addEvent("domready",function(){$("leftToggler").addEvents({click:function(a){var a=new Event(a).target;window.setSidePanel=true;if($(document.body).hasClass("closeLeft")){showSide()}else{closeSide()}}});makeAjaksLink(document.body);W=getW();new Ajax("index.php?ctl=dashboard&act=getcertInfo",{data:"t="+new Date().getTime(),update:"CertificateInfo"}).request();new DropMenu("msgRunner");window.addEvent("resize",updateSize)});var extra_validator=[];function __(){}function toggleNode(g){g=new Event(g);var i=$(g.target);if(i.tagName=="IMG"){var c=$(i.get("toggle"));if(c){if(c.style.display=="none"){i.removeClass("x-tnode-close");c.show()}else{i.addClass("x-tnode-close");c.hide()}g.stop()}else{var b=i.get("tree");if(b){i.removeClass("x-tnode-close");var f=i.getParent().get("tid");var a=i.parentNode.parentNode.id+"_"+f;var d=new Element("div",{id:a,"class":"cateloadingbox"}).injectAfter(i.parentNode);var h=new Element("div").setText("loading...").setStyle("padding-left",i.parentNode.getStyle("padding-left").toInt()+20);d.adopt(h);i.set("toggle",a);new Ajax("index.php?ctl=default&act=tnode&p[0]="+b+"&p[1]="+f+"&p[2]="+i.parentNode.get("depth"),{method:"get",update:a,onComplete:function(){makeAjaksLink(a)}}).request()}}}}window.setTab=function(e,b){var d=$("_"+e).getAttribute("url");if(d&&!$(e).getAttribute("url")){W.page(d,{update:e});$(e).setAttribute("url",d)}$(e).style.display="";$("_"+e).addClass("t-handle-current");$("_"+e).removeClass("t-handle");b.each(function(c){$(c).style.display="none";$("_"+c).addClass("t-handle");$("_"+c).removeClass("t-handle-current")})};$E("#header .user_guide").addEvent("click",function(){var a=this;var b;new Request({method:"post",onComplete:function(c){b=c;var d=a.retrieve("step",b);var e=new Element("iframe",{width:710,height:520,src:d,frameborder:0,scrolling:"no",id:"user_guide_iframe",styles:{border:"none",margin:0}}).addEvent("load",function(){return;var j=this.contentWindow;var i=this.contentWindow.document;var g=j.location.href;if(!g.contains("user_guide")){return}$E("#header .user_guide").store("step",j.location.href);$("loadMask").hide();var h=new Elements(i.getElementsByTagName("a"));h=h.filter(function(k){return(!k.getFirst()||k.hasClass("userguidelink"))&&k.get("target")!="_blank"}).addEvent("click",function(k){k.stop();a.store("goUrl",this.href.split("user_guide/")[1]).retrieve("dialog").close()})});var f=new Dialog(e,{title:"ShopEx使用向导",height:570,ajaksable:false,onLoad:function(){if(!window.gecko){e.set("src",d)}},onClose:function(){new Element("div",{styles:{background:"#66CCFF",position:"absolute",overflow:"hidden",zIndex:65535,opacity:0.3,border:"2px #333 dashed"}}).inject(document.body).setStyles(this.dialog.getCis()).effects({duration:800,fps:90}).start(a.getCis()).chain(function(){this.element.remove();if(a.retrieve("goUrl")){W.page(a.retrieve("goUrl"))}a.store("goUrl",false)})}});a.store("dialog",f)}}).post("index.php?ctl=default&act=getcertidandurl")});window.addEvent("load",function(){$E(".container").setStyle("visibility","visible");if(!Browser.Plugins.Flash.version||Browser.Plugins.Flash.version<9){var a;if(Browser.Plugins.Flash.version){a="当前的Flash Player 版本:<strong>"+Browser.Plugins.Flash.version+"."+Browser.Plugins.Flash.build+"</strong>"}else{a="<strong>未安装Flash player 插件.</strong>"}new Dialog(new Element("div").setHTML("<h3 class='error'>",a,"<br/><br/>可能会影响到正常使用.你是否要手动升级安装?</h3>","<a href='http://www.macromedia.com/go/getflashplayer' class='sysiconBtnNoIcon'><strong>是</strong>,我要去下载升级包</a>","<span isCloseDialogBtn='true' class='sysiconBtnNoIcon'><strong>否</strong>,我不想升级</span>"),{title:"Flash Player 可能会引起问题.",resizeable:false,width:450,height:150})}if(!DEBUG_JS&&$("_firebugConsole")){(function(){new Dialog(new Element("div").setHTML("<h3 class='error'>在已知情况下，除非正确配置 Firebug，否则它会使 ShopEx后台 运行缓慢</h3><span class='lnk' isCloseDialogBtn='true'>我知道了!</span>"),{title:"FireBug 使程序变慢.",resizeable:false,width:450,height:150})}).delay(5000)}});window.addEvent("domready",function(){try{window.Xtip=new Tips($("shop_title_block"),{className:"x-tip"});$("shop_title_block").store("tip:title","网店名称:-(点击进行设置)");$("shop_title_block").store("tip:text",$("shop_title_block").subText(25));setInterval("if($('elTempBox')&&$('elTempBox').getElements('*').length)$('elTempBox').empty()",2*60000);var c;var a=[];if(window.ie){c=document.body}else{c=window}c.focus();c.addEvent("keydown",function(i){if(i.code==27){$E(".finder-search-input")?$E(".finder-search-input").blur():false;c.focus()}if(["INPUT","TEXTAREA"].contains(i.target.tagName)){return}if(i.shift&&i.code==191){return new Dialog("shortcut_key_help.html",{title:"快捷键",ajaksable:false,width:window.getSize().x*0.7,height:window.getSize().y*0.7})}var f=new Hash({t49:"top-tab-goods",t50:"top-tab-order",t51:"top-tab-member",t52:"top-tab-sale",t53:"top-tab-site",t54:"top-tab-analytics"});var h="t"+i.code;if(i.alt&&f.getKeys().contains(h)){return $(f[h]).fireEvent("click",{stop:$empty})}switch(i.code){case 27:var g=$$(".dialog");if(g.length){return g.getLast().retrieve("instance").close()}if(MODALPANEL.isDisplay()){return MODALPANEL.hide()}for(cf in finderGroup){return finderGroup[cf].detail.fireEvent("slideOut")}break;case 82:if(i.control){return}var d=historyManager.getHash();W.page("index.php?"+(d?d:"ctl=dashboard&act=index"));break;case 85:$(document.body).toggleClass("closeLeft");updateSize();break;case 191:i.stop();return $E(".finder-search-input")?$E(".finder-search-input").focus():false;case 72:return $E("#header .user_guide").fireEvent("click",{stop:$empty})}a.push(i.code);if(a.toString().indexOf("38,38,40,40,37,37,39,39,66,65")>-1){new Dialog("google_gears.html",{title:"利用Gears加速ShopEx后台",ajaksable:false});a=[]}})}catch(b){alert(b)}});(function(){if(window.google&&google.gears){return}var a=null;if(typeof GearsFactory!="undefined"){a=new GearsFactory()}else{try{a=new ActiveXObject("Gears.Factory");if(a.getBuildInfo().indexOf("ie_mobile")!=-1){a.privateSetGlobalObject(this)}}catch(b){if((typeof navigator.mimeTypes!="undefined")&&navigator.mimeTypes["application/x-googlegears"]){a=document.createElement("object");a.style.display="none";a.width=0;a.height=0;a.type="application/x-googlegears";document.documentElement.appendChild(a)}}}if(!a){return}if(!window.google){google={}}if(!google.gears){google.gears={factory:a}}})();void function(){if(window.google&&google.gears){var a=$E("#header .top-link-menu").setStyle("width",320);var b=a.getElement(".gearsIco").show();b.store("tip:text","当前浏览器支持<b>Gears</b><sup>Powered By Google</sup><br/><br/><b>Gears</b>可以同步远程资源到本地，使程序加载运行更迅速。");new Tips(b,{className:"x-tip"});b.addEvent("click",function(c){c.stop();new Dialog("google_gears.html",{title:"利用Gears加速ShopEx后台",ajaksable:false})})}}();